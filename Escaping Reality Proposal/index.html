<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A-Frame 2026 City VR</title>
    <!-- Use latest A-Frame 1.7.0 for 2026 browser compatibility -->
    <script src="https://aframe.io"></script>
    <script src="https://unpkg.com"></script>
    <script src="https://cdn.jsdelivr.net"></script>

    <script>
      // Movement component for traffic
      AFRAME.registerComponent('drive-logic', {
        schema: { speed: {type: 'number', default: 0.2} },
        tick: function (time, timeDelta) {
          let pos = this.el.getAttribute('position');
          pos.z += this.data.speed;
          if (pos.z > 40) pos.z = -40;
          this.el.setAttribute('position', pos);
        }
      });
    </script>
  </head>

  <body>
    <!-- timeout="5000" forces the scene to load even if assets fail -->
    <a-scene renderer="colorManagement: true" poolSize="20">
      
      <a-assets timeout="5000">
        <!-- Added crossorigin="anonymous" to prevent the '3 dots' hang -->
        <a-asset-item id="car-model" src="https://cdn.jsdelivr.net" crossorigin="anonymous"></a-asset-item>
        <audio id="engine" src="https://cdn.freesound.org" crossorigin="anonymous"></audio>
      </a-assets>

      <!-- Player & Controls -->
      
        
          <a-cursor></a-cursor>
        
      

      <!-- Environment & Day/Night Cycle -->
      

      <!-- Roads and Moving Traffic -->
      <a-plane rotation="-90 0 0" width="12" height="100" color="#111" position="0 0.02 0"></a-plane>

      <!-- Car 1 (Model) -->
      

      <!-- Bus (Animated Shape) -->
      <a-box color="orange" position="3 1.2 10" width="2.2" height="2" depth="7" drive-logic="speed: -0.1">
        <a-text value="CITY BUS" align="center" position="0 2.5 0" color="black" side="double"></a-text>
      </a-box>

      <!-- Sways Trees -->
      
        <a-cylinder color="#3d2b1f" radius="0.2" height="3"></a-cylinder>
        <a-sphere color="green" radius="1.5" position="0 3 0"></a-sphere>
      

      <!-- Weather (Fog Toggle via Inspector Ctrl+Alt+I) -->
      <a-sky color="#87CEEB"></a-sky>

    </a-scene>
  </body>
</html>
