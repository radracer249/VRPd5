<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>A-Frame City (Guaranteed Render)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Prevent white / black flash -->
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: #000;
      overflow: hidden;
    }
  </style>

  <!-- A-Frame ONLY (no extras) -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
</head>

<body>
<a-scene
  loading-screen="enabled: false"
  renderer="antialias: true; colorManagement: true"
  fog="type: linear; color: #8899aa; near: 20; far: 120">

  <!-- LIGHTING (critical) -->
  <a-entity light="type: ambient; intensity: 0.7"></a-entity>
  <a-entity id="sun" light="type: directional; intensity: 1" position="10 20 10"></a-entity>

  <!-- CAMERA -->
  <a-entity position="0 1.6 6">
    <a-camera wasd-controls look-controls></a-camera>
  </a-entity>

  <!-- SKY -->
  <a-sky id="sky" color="#87CEEB"></a-sky>

  <!-- GROUND -->
  <a-plane
    rotation="-90 0 0"
    width="300"
    height="300"
    color="#444">
  </a-plane>

  <!-- ROADS -->
  <a-plane rotation="-90 0 0" width="12" height="200" color="#222"></a-plane>
  <a-plane rotation="-90 0 0" width="200" height="12" color="#222"></a-plane>

  <!-- BUILDINGS -->
  <a-box position="6 6 -10" width="6" height="12" depth="6" color="#888"></a-box>
  <a-box position="-8 5 -14" width="5" height="10" depth="5" color="#777"></a-box>
  <a-box position="12 8 -20" width="8" height="16" depth="8" color="#666"></a-box>

  <!-- TREES -->
  <a-entity position="-12 0 -6">
    <a-cylinder height="3" radius="0.35" color="#7A4A2E"></a-cylinder>
    <a-sphere
      position="0 3 0"
      radius="1.6"
      color="#2E8B57"
      animation="property: rotation; to: 0 12 0; dir: alternate; dur: 2500; loop: true">
    </a-sphere>
  </a-entity>

  <!-- TRAFFIC LIGHT -->
  <a-box position="0 2 -6" width="0.3" height="4" depth="0.3" color="#333"></a-box>
  <a-sphere
    position="0 3.5 -6"
    radius="0.3"
    color="red"
    animation="property: color; from: red; to: green; dur: 4000; loop: true; dir: alternate">
  </a-sphere>

  <!-- MOVING CARS (safe primitive versions) -->
  <a-box
    position="-20 0.5 0"
    width="2"
    height="1"
    depth="4"
    color="#ff3333"
    animation="property: position; to: 20 0.5 0; dur: 12000; loop: true">
  </a-box>

  <a-box
    position="0 0.5 -20"
    width="2.5"
    height="1.2"
    depth="5"
    rotation="0 90 0"
    color="#3366ff"
    animation="property: position; to: 0 0.5 20; dur: 16000; loop: true">
  </a-box>

  <!-- BUS -->
  <a-box
    position="20 0.6 -3"
    width="3"
    height="1.5"
    depth="7"
    color="#ffaa00"
    animation="property: position; to: -20 0.6 -3; dur: 18000; loop: true">
  </a-box>

  <!-- PEDESTRIAN -->
  <a-box
    position="-6 1 -2"
    width="0.5"
    height="2"
    depth="0.5"
    color="#ffd700"
    animation="property: position; to: 6 1 -2; dur: 8000; loop: true">
  </a-box>

  <!-- DAY / NIGHT CYCLE -->
  <script>
    const sky = document.querySelector('#sky');
    const sun = document.querySelector('#sun');
    let day = true;

    setInterval(() => {
      if (day) {
        sky.setAttribute('color', '#020924');
        sun.setAttribute('light', 'intensity', 0.2);
      } else {
        sky.setAttribute('color', '#87CEEB');
        sun.setAttribute('light', 'intensity', 1);
      }
      day = !day;
    }, 15000);
  </script>

</a-scene>
</body>
</html>
